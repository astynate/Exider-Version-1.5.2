<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Exider — Cloud Page</title>
    <link rel="stylesheet" href="css/mobile/global/global-style-mobile.css">
    <link rel="stylesheet" href="css/mobile/cloud/cloud-local.css">
    <link rel="stylesheet" href="css/files/files-local.css">
    <link rel="stylesheet" href="css/files/files-file.css">
</head>

@{
    Layout = null;
    string[] image_format = new string[4] { "png", "jpg", "jpeg", "gif" };
}

<body>
    <div class="body-wrapper">
        <div class="body-header">
            <div>
                @* <img src="data:image/png;base64,@(Convert.ToBase64String(Model.Avatar))" class="user-avatar"> *@
            </div>
            <img src="~/Images/Logo/zixe_logo.svg" class="logo">
        </div>
        <div class="body-content">
            @foreach (var folder in Model.Folders)
            {
                <a href="~/files?id=@folder.id" style="text-decoration: none; color: black;">
                    <div class="main-content-file folder" id="@folder.id">
                        <img src="Images/Files/folder.png" class="main-content-file-image">
                        <div class="main-content-file-describtion">
                            <span id="file-name">@folder.name</span>
                            <span id="file-date">@folder.date</span>
                            <span id="file-time">@folder.time</span>
                        </div>
                    </div>
                </a>

            }

            @foreach (var file in Model.Files)
            {

                @if (Array.Exists(image_format, x => x == file.type))
                {

                    <div class="main-content-file" id="@file.id">
                        <img src="data:image/png;base64,@(Convert.ToBase64String(file.file))" class="main-content-file-image">
                        <div class="main-content-file-describtion">
                            <span id="file-name">@file.name</span>
                            <span id="file-date">@file.date</span>
                            <span id="file-time">@file.time</span>
                        </div>
                    </div>

                }

                else
                {

                    <div class="main-content-file" id="@file.id">
                        <img src="~/images/Files/default-file.png" class="main-content-file-image">
                        <div class="main-content-file-describtion">
                            <span id="file-name">@file.name</span>
                            <span id="file-date">@file.date</span>
                            <span id="file-time">@file.time</span>
                        </div>
                    </div>

                }

            }
        </div>
        <div class="add-button">
        </div>
        <div class="body-navigation-panel">
            <img src="Images/buttons-mobile/home-passive.png" class="navigation-button" id="home" onclick="window.location.href = '/home'">
            <img src="Images/buttons-mobile/search-passive.svg" class="navigation-button" id="search" onclick="window.location.href = '/explore'">
            <img src="Images/buttons-mobile/add-passive.svg" class="navigation-button" id="add">
            <img src="Images/buttons-mobile/cloud-active.svg" class="navigation-button" id="cloud" onclick="window.location.href = '/files'">
            <img src="Images/buttons-mobile/chats-passive.svg" class="navigation-button" id="chats" onclick="window.location.href = '/chats'">
        </div>
    </div>
    <script>
        window.addEventListener('click', (event) => {

            if (event.target.id != 'add' && event.target.className != 'add-button') {

                document.querySelector('.add-button')
                    .id = 'passive';

            }

        });
        document.querySelector('#add').addEventListener('click', () => {

            document.querySelector('.add-button')
                .id = 'active';

        });
    </script>
</body>
</html>